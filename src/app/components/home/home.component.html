<section class="home">
  <p-card class="filter-card">
    <form [formGroup]="filterForm" class="filters p-grid p-fluid" (ngSubmit)="$event.preventDefault()">
      <div class="flex flex-column md:flex-row flex-wrap gap-3">
        <div class="col">
          <label class="filter-label">Marca</label>
          <p-dropdown formControlName="brandId" [options]="brands" optionLabel="name" optionValue="id" placeholder="Selecione"></p-dropdown>
        </div>

        <div class="col">
          <label class="filter-label">Modelo</label>
          <input pInputText formControlName="modelName" placeholder="Ex: CB 500" />
        </div>

        <div class="col">
          <label class="filter-label">Preço Min</label>
          <p-inputNumber formControlName="minPrice" mode="currency" currency="BRL"></p-inputNumber>
        </div>

        <div class="col">
          <label class="filter-label">Preço Max</label>
          <p-inputNumber formControlName="maxPrice" mode="currency" currency="BRL"></p-inputNumber>
        </div>

        <div class="col">
          <label class="filter-label">KM Min</label>
          <p-inputNumber formControlName="minKm" suffix=" km"></p-inputNumber>
        </div>

        <div class="col">
          <label class="filter-label">KM Max</label>
          <p-inputNumber formControlName="maxKm" suffix=" km"></p-inputNumber>
        </div>
      </div>
      <div class="col-12 actions">
        <button pButton type="button" label="Limpar" class="p-button-text" (click)="clearFilters()"></button>
        <button pButton type="button" label="Nova Moto" icon="pi pi-plus" (click)="goToCadastro()"></button>
      </div>
    </form>
  </p-card>

  <app-tabela-principal-estoque
    #estoqueTabela
    [filters]="activeFilters"
    (edit)="onEdit($event)"
    (view)="onView($event)"
  ></app-tabela-principal-estoque>

  <p-dialog
    header="Editar moto"
    [(visible)]="displayEditDialog"
    [modal]="true"
    [closable]="true"
    [dismissableMask]="true"
    appendTo="body"
    [style]="{ width: '900px', maxWidth: '95vw' }"
    (onHide)="onDialogHide()"
  >
    <ng-container *ngIf="selectedMotorcycle as moto">
      <app-formulario-cadastro-moto
        [editDialog]="true"
        [initialMotorcycle]="moto"
        (saved)="onMotorcycleSaved($event)"
      ></app-formulario-cadastro-moto>
    </ng-container>
    <ng-container *ngIf="!selectedMotorcycle">
      <p>Carregando dados...</p>
    </ng-container>
  </p-dialog>
</section>
