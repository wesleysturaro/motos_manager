<section class="home">
  <div class="hero">
    <div class="hero__text">
      <span class="pill">Painel de estoque</span>
      <h1 class="page-title">Motos RLeo</h1>
      <p class="muted">
        Filtros rapidos, edicao simplificada.
      </p>
      <div class="hero__actions">
        <button pButton type="button" label="Nova moto" icon="pi pi-plus" (click)="goToCadastro()"></button>
        <button pButton type="button" class="p-button-text" label="Limpar filtros" icon="pi pi-filter-slash" (click)="clearFilters()"></button>
      </div>
    </div>
    <div class="hero__card section-card">
      <div class="hero__badge">
        <i class="pi pi-bolt"></i>
        Fluxo otimizado
      </div>
      <p class="muted">Use os filtros abaixo e abra a moto em modal para editar sem sair da lista.</p>
      <div class="hero__highlights">
        <div>
          <span class="label">KM & Preco</span>
          <strong>Faixas em paralelo</strong>
        </div>
        <div>
          <span class="label">Anos</span>
          <strong>Fabricacao + modelo</strong>
        </div>
      </div>
    </div>
  </div>

  <p-card class="filter-card">
    <div class="filter-card__header">
      <div>
        <div class="pill muted">Filtros refinados</div>
        <h3>Busque em segundos</h3>
        <p class="muted">Combine marca, modelo, preco, quilometragem e anos sem travar o fluxo.</p>
      </div>
    </div>

    <form [formGroup]="filterForm" class="filters grid" (ngSubmit)="$event.preventDefault()">
      <div class="col-12 md:col-3">
        <label class="filter-label">Marca</label>
        <p-dropdown formControlName="brandId" [options]="brands" optionLabel="name" optionValue="id" placeholder="Selecione"></p-dropdown>
      </div>

      <div class="col-12 md:col-3">
        <label class="filter-label">Modelo</label>
        <input pInputText formControlName="modelName" placeholder="Ex: CB 500" />
      </div>

      <div class="col-6 md:col-2">
        <label class="filter-label">Preco min.</label>
        <p-inputNumber formControlName="minPrice" mode="currency" currency="BRL"></p-inputNumber>
      </div>

      <div class="col-6 md:col-2">
        <label class="filter-label">Preco max.</label>
        <p-inputNumber formControlName="maxPrice" mode="currency" currency="BRL"></p-inputNumber>
      </div>

      <div class="col-6 md:col-2">
        <label class="filter-label">KM min.</label>
        <p-inputNumber formControlName="minKm" suffix=" km"></p-inputNumber>
      </div>

      <div class="col-6 md:col-2">
        <label class="filter-label">KM max.</label>
        <p-inputNumber formControlName="maxKm" suffix=" km"></p-inputNumber>
      </div>

      <div class="col-6 md:col-2">
        <label class="filter-label">Ano fab.</label>
        <p-inputNumber formControlName="year" [useGrouping]="false"></p-inputNumber>
      </div>

      <div class="col-6 md:col-2">
        <label class="filter-label">Ano modelo</label>
        <p-inputNumber formControlName="modelYear" [useGrouping]="false"></p-inputNumber>
      </div>
    </form>
  </p-card>

  <app-tabela-principal-estoque
    #estoqueTabela
    [filters]="activeFilters"
    (edit)="onEdit($event)"
    (view)="onView($event)"
  ></app-tabela-principal-estoque>

  <p-dialog
    header="Editar moto"
    [(visible)]="displayEditDialog"
    [modal]="true"
    [closable]="true"
    [dismissableMask]="true"
    appendTo="body"
    [style]="{ width: '900px', maxWidth: '95vw' }"
    (onHide)="onDialogHide()"
  >
    <ng-container *ngIf="selectedMotorcycle as moto">
      <app-formulario-cadastro-moto
        [editDialog]="true"
        [initialMotorcycle]="moto"
        (saved)="onMotorcycleSaved($event)"
      ></app-formulario-cadastro-moto>
    </ng-container>
    <ng-container *ngIf="!selectedMotorcycle">
      <p>Carregando dados...</p>
    </ng-container>
  </p-dialog>
</section>
